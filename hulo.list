# > hulo.list - Chinese Social Media Rules
# > This ruleset contains rules for Chinese social media platforms
# > Included: Zhihu and Xiaohongshu (RED)
# > Use this ruleset to route traffic through proxy for better performance

# ========================================
# Zhihu - Q&A Community Platform ⭐ IP Control
# ========================================
# China's largest question-and-answer platform
# Purpose: Control IP location display for posts and comments

# > User-Agent Rules
USER-AGENT,*zhihu*
USER-AGENT,zhihu*
USER-AGENT,*ZhihuHybrid*  # Zhihu APP hybrid framework
USER-AGENT,*osee*  # Zhihu internal codename

# > Domain Rules
DOMAIN,api.zhihu.com  # Zhihu API - Critical for APP (must be first!)
DOMAIN-SUFFIX,zhihu.com  # Main domain (includes all subdomains: www, link, etc.)
DOMAIN-SUFFIX,zhimg.com  # Zhihu image CDN (pic1.zhimg.com, pic2.zhimg.com, etc.)
DOMAIN-KEYWORD,zhihu

# > Zhihu IP Ranges - For APP IP Location Display ⭐
# Note: Carefully selected to avoid conflicts with Xiaohongshu

# > Zhihu Main Service IPs (Aliyun Beijing)
IP-CIDR,47.94.0.0/16,no-resolve  # Aliyun Beijing - Zhihu API servers
IP-CIDR,47.95.0.0/16,no-resolve  # Aliyun Beijing - Zhihu web services

# > Zhihu CDN IPs (Aliyun Hangzhou)
IP-CIDR,47.96.0.0/16,no-resolve  # Aliyun Hangzhou zone A
IP-CIDR,47.97.0.0/16,no-resolve  # Aliyun Hangzhou zone B
IP-CIDR,47.98.0.0/16,no-resolve  # Aliyun Hangzhou zone C

# > Zhihu Image CDN (zhimg.com)
IP-CIDR,121.196.0.0/16,no-resolve  # Zhihu image CDN
IP-CIDR,121.199.0.0/16,no-resolve  # Zhihu image CDN backup

# > Zhihu API Servers (Specific)
IP-CIDR,106.75.0.0/16,no-resolve  # Zhihu API backend
IP-CIDR,120.55.0.0/16,no-resolve  # Zhihu API backend backup

# > Zhihu Video CDN
IP-CIDR,121.43.0.0/16,no-resolve  # Zhihu video CDN

# ========================================
# Xiaohongshu - Lifestyle Sharing Platform ⭐ IP Control
# ========================================
# Also known as RED, a lifestyle and social e-commerce platform
# Optimized to MINIMAL rules to avoid "network status poor" warnings

# > Domain Rules (Ultra-minimal for best performance)
DOMAIN-SUFFIX,xiaohongshu.com  # Main domain (includes all subdomains: www, edith, etc.)
DOMAIN-SUFFIX,xhscdn.com  # Xiaohongshu CDN (includes all image/video nodes)
# Image & Video CDN (explicit for better performance)
# ⚠️ DISABLED: Causing "network status poor" warnings (node issue)
# DOMAIN,ci.xiaohongshu.com  # Image processing service
# DOMAIN,picasso.xiaohongshu.com  # Image upload service
# DOMAIN,edith.xiaohongshu.com  # Content editor API
# DOMAIN,sns-img-qc.xhscdn.com  # Image CDN - Qingdao node
# DOMAIN,sns-img-bd.xhscdn.com  # Image CDN - Beijing node
# DOMAIN,sns-img-hw.xhscdn.com  # Image CDN - Huawei Cloud node

# > Xiaohongshu IP Ranges
# Xiaohongshu server and CDN IP addresses in China
# ⚠️ DISABLED: IP rules cause slower matching and "network status poor" warnings

# > Primary Service IPs
# IP-CIDR,223.109.0.0/16,no-resolve
# IP-CIDR,103.41.0.0/16,no-resolve

# > CDN Node IPs (China Telecom)
# IP-CIDR,183.213.20.0/24,no-resolve
# IP-CIDR,203.205.136.0/24,no-resolve
# IP-CIDR,211.152.146.0/24,no-resolve

# > CDN Node IPs (China Unicom)
# IP-CIDR,103.41.167.0/24,no-resolve
# IP-CIDR,118.89.204.0/24,no-resolve
# IP-CIDR,163.181.35.0/24,no-resolve

# > CDN Node IPs (China Mobile)
# IP-CIDR,116.0.89.0/24,no-resolve
# IP-CIDR,27.221.120.0/24,no-resolve

# > CDN Node IPs (Multi-ISP/BGP)
# IP-CIDR,36.156.0.0/16,no-resolve
# IP-CIDR,58.216.0.0/16,no-resolve
# IP-CIDR,58.243.0.0/16,no-resolve
# IP-CIDR,47.246.0.0/16,no-resolve
# IP-CIDR,119.28.0.0/16,no-resolve

# > Xiaohongshu IPv6
# IP-CIDR6,2402:4e00:1200:ed00:0:9089:6dac:96b6/128,no-resolve
